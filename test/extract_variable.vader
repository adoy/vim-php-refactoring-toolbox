Given php (condition on if):
  <?php

  $sentence = 'Hello';

  if ('foo' === $firstName) {
      $sentence .= ' ' . $firstName;
  }

Do (select the condition and extract variable):
  /foo\<CR>
  vi(
  ;ev
  firstNameIsValid\<CR>

Expect php (variable is extracted):
  <?php

  $sentence = 'Hello';

  $firstNameIsValid = 'foo' === $firstName;

  if ($firstNameIsValid) {
      $sentence .= ' ' . $firstName;
  }

Given php (condition on if and on function):
  <?php

  function prepareSentence()
  {
      $sentence = 'Hello';

      if ('foo' === $firstName) {
          $sentence .= ' ' . $firstName;
      }

      return $sentence;
  }

Do (select the condition and extract variable):
  /foo\<CR>
  vi(
  ;ev
  firstNameIsValid\<CR>

Expect php (variable is extracted):
  <?php

  function prepareSentence()
  {
      $sentence = 'Hello';

      $firstNameIsValid = 'foo' === $firstName;

      if ($firstNameIsValid) {
          $sentence .= ' ' . $firstName;
      }

      return $sentence;
  }
